<%# Ajouter un champ input qui permet de definir le point de départ avec une adresse
- Autocompletion via l'API Mapbox
- transformer l'adresse en coordonnées géographiques (longitude, latitude) avec l'API Geocoding de Mapbox
- Le controller WalkingsController devra récupérer ces coordonnées pour générer les X POIs
- Gérer le nombre X de POIs en fonction du temps input
%>

<div class="walking-new-container">
  <div class="walking-form-card">
    <h2 class="page-title">Nouvelle balade</h2>
    <%= form_with model: @walking, local: true, class: "walk-form" do |f| %>

      <div class="form-group"
           data-controller="address-autocomplete"
           data-address-autocomplete-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"
           style="position: relative;">
        <%= f.label :address, "Point de départ" %>
        <div class="autocomplete-wrapper">
          <%= f.text_field :address,
              class: "form-input",
              placeholder: "Entrez une adresse...",
              data: { address_autocomplete_target: "address" },
              autocomplete: "off"
          %>
          <%= f.hidden_field :latitude, data: { address_autocomplete_target: "latitude" } %>
          <%= f.hidden_field :longitude, data: { address_autocomplete_target: "longitude" } %>
        </div>
        <div class="autocomplete-results"
             data-address-autocomplete-target="results"
             style="position: absolute; z-index: 1000; width: 100%; border: 1px solid #ddd; border-radius: 4px; max-height: 200px; overflow-y: auto; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
        </div>
      </div>

      
      <div class="form-group" data-controller="slider">
        <%= f.label :wanted_duration, "Durée de la balade" %>
        <div class="slider-container">
          <%= f.range_field :wanted_duration,
              min: 5,
              max: 120,
              step: 5,
              value: 30,
              class: "form-slider",
              data: {
                slider_target: "input",
                action: "input->slider#update"
              } %>
          <div class="slider-value">
            <span data-slider-target="output">30</span> minutes
          </div>
        </div>
      </div>
      <div class="form-group">
        <%= f.label :sociable, "Type de balade" %>
        <div class="button-group" data-controller="toggle">
          <%= f.hidden_field :sociable, value: "true", data: { toggle_target: "input" } %>
          <button type="button" class="btn btn-toggle" data-toggle-target="button" data-action="click->toggle#fire" data-value="false">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 14l9-5-9-5-9 5 9 5z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Balade privée
          </button>
          <button type="button" class="btn btn-toggle active" data-toggle-target="button" data-action="click->toggle#fire" data-value="true">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Balade publique
          </button>
        </div>
      </div>
      <%= f.submit "Générer la balade", class: "btn btn-primary btn-lg w-full" %>
    <% end %>
  </div>
</div>
