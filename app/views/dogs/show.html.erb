<% content_for :title, @dog.name %>

<div class="dog-show-container">
  <div class="dog-card">
    <div class="dog-profile-header">
      <div class="dog-profile-image-wrapper">
        <% if @dog.photo.attached? %>
          <%= image_tag @dog.photo, class: "dog-profile-image", alt: @dog.name %>
        <% elsif @dog.url_picture.present? %>
          <%= image_tag @dog.url_picture, class: "dog-profile-image", alt: @dog.name %>
        <% else %>
          <img src="https://i.pravatar.cc/150?img=12" alt="Default Dog" class="dog-profile-image">
        <% end %>
      </div>
    </div>
    <div class="dog-info-group">
      <span class="dog-info-label"><%= @is_owner ? "Mon chien" : "Chien" %></span>
      <div class="dog-info-value"><%= @dog.name.capitalize %></div>
    </div>
    <div class="dog-info-group">
      <span class="dog-info-label">Âge</span>
      <div class="dog-info-value"><%= @dog.age %> ans</div>
    </div>
    <div class="dog-info-group">
      <span class="dog-info-label">Race</span>
      <div class="dog-info-value"><%= @dog.race&.capitalize || "Non renseigné" %></div>
    </div>
    <div class="dog-info-group">
      <span class="dog-info-label">Taille</span>
      <div class="dog-info-value"><%= @dog.size&.capitalize || "Non renseigné" %></div>
    </div>
    <div class="dog-info-group">
      <span class="dog-info-label">Personnalité & Traits</span>
      <div class="dog-tags-container">
        <% @dog.tags.each do |tag| %>
          <span class="dog-tag"><%= tag.name&.capitalize %></span>
        <% end %>
        <% if @dog.tags.empty? %>
          <span style="color: var(--text-muted); font-style: italic;">Aucun trait de personnalité ajouté.</span>
        <% end %>
      </div>
    </div>

    <% if @is_owner %>
      <div class="dog-profile-actions">
        <%= link_to edit_dog_path(@dog), class: "dog-profile-btn" do %>
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
          </svg>
          Modifier le profil
        <% end %>

        <%= button_to destroy_user_session_path, method: :delete, class: "dog-profile-btn dog-profile-btn--logout" do %>
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
            <polyline points="16 17 21 12 16 7"></polyline>
            <line x1="21" y1="12" x2="9" y2="12"></line>
          </svg>
          Se déconnecter
        <% end %>
      </div>
    <% else %>
      <div class="dog-profile-actions">
        <%= link_to root_path, class: "dog-profile-btn" do %>
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M19 12H5"></path>
            <polyline points="12 19 5 12 12 5"></polyline>
          </svg>
          Retour
        <% end %>
      </div>
    <% end %>

  </div>
</div>
